{% extends "base.html" %}

{% block head %}
{{ super() }}
<style>
    .demo-card {
        transition: all 0.3s ease;
        border: 1px solid rgba(255,255,255,0.1);
        background-color: rgba(var(--bs-dark-rgb), 0.6);
    }
    
    .demo-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        border-color: rgba(var(--bs-primary-rgb), 0.5);
    }
    
    .demo-btn {
        transition: all 0.2s ease;
    }
    
    .demo-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .demo-image {
        border-radius: 8px;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        max-height: 200px;
        cursor: pointer;
    }
    
    .demo-image:hover {
        transform: scale(1.02);
        border-color: var(--bs-primary);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card bg-dark shadow-sm mb-5">
                <div class="card-header">
                    <h1 class="h3 mb-0 text-center">
                        <i class="fas fa-window-maximize me-2"></i>Dialog Components Demo
                    </h1>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        This page demonstrates the reusable dialog components based on shadcn/ui principles.
                        These components can be easily integrated throughout the application.
                    </div>
                    
                    <div class="row g-4 mt-3">
                        <!-- Bulk Order Dialog Demo -->
                        <div class="col-md-6">
                            <div class="card demo-card h-100">
                                <div class="card-header bg-dark">
                                    <h5 class="mb-0">Bulk Order Dialog</h5>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <p class="text-muted mb-4">
                                        A form dialog with multiple input types, loading states, and progress updates.
                                    </p>
                                    <div class="mt-auto">
                                        <button class="btn btn-primary w-100 demo-btn" data-open-dialog="bulk-order">
                                            <i class="fas fa-boxes me-2"></i>Open Bulk Order Dialog
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Image Viewer Dialog Demo -->
                        <div class="col-md-6">
                            <div class="card demo-card h-100">
                                <div class="card-header bg-dark">
                                    <h5 class="mb-0">Image Viewer Dialog</h5>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <p class="text-muted mb-4">
                                        An advanced image viewer with zoom controls, navigation between images, and download functionality.
                                    </p>
                                    <div class="d-flex justify-content-center align-items-center mb-4">
                                        <img src="{{ url_for('static', filename='img/demo_image_1.jpg') }}" 
                                             class="demo-image me-3" alt="Demo Image 1"
                                             data-image-viewer data-gallery-id="demo-gallery">
                                        <img src="{{ url_for('static', filename='img/demo_image_2.jpg') }}" 
                                             class="demo-image" alt="Demo Image 2"
                                             data-image-viewer data-gallery-id="demo-gallery">
                                    </div>
                                    <p class="text-muted small text-center">Click on any image to open the viewer</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Custom Dialog Demo -->
                        <div class="col-md-6">
                            <div class="card demo-card h-100">
                                <div class="card-header bg-dark">
                                    <h5 class="mb-0">Custom Dialog</h5>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <p class="text-muted mb-4">
                                        Create a dialog dynamically using JavaScript. This demonstrates how to create and configure dialogs programmatically.
                                    </p>
                                    <div class="mt-auto">
                                        <button class="btn btn-primary w-100 demo-btn" id="open-custom-dialog">
                                            <i class="fas fa-magic me-2"></i>Open Custom Dialog
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- API Integration Dialog Demo -->
                        <div class="col-md-6">
                            <div class="card demo-card h-100">
                                <div class="card-header bg-dark">
                                    <h5 class="mb-0">API Integration Dialog</h5>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <p class="text-muted mb-4">
                                        This dialog demonstrates how to handle API calls and data loading states in a dialog component.
                                    </p>
                                    <div class="mt-auto">
                                        <button class="btn btn-primary w-100 demo-btn" id="open-api-dialog">
                                            <i class="fas fa-cloud me-2"></i>Open API Dialog
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card bg-dark shadow-sm">
                <div class="card-header">
                    <h2 class="h4 mb-0">Implementation Details</h2>
                </div>
                <div class="card-body">
                    <p>These dialog components are designed to be reusable across your application and follow a few key principles:</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-palette me-2"></i>Design</h5>
                            <ul class="list-unstyled ps-3">
                                <li><i class="fas fa-check text-success me-2"></i>Frosted glass effect using backdrop-filter: blur(8px)</li>
                                <li><i class="fas fa-check text-success me-2"></i>Subtle animations for opening, closing, and hover states</li>
                                <li><i class="fas fa-check text-success me-2"></i>Consistent styling with the application's design system</li>
                                <li><i class="fas fa-check text-success me-2"></i>Responsive design that adapts to different screen sizes</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-cogs me-2"></i>Functionality</h5>
                            <ul class="list-unstyled ps-3">
                                <li><i class="fas fa-check text-success me-2"></i>Keyboard shortcuts and focus management</li>
                                <li><i class="fas fa-check text-success me-2"></i>Loading states and progress updates</li>
                                <li><i class="fas fa-check text-success me-2"></i>Flexible API with configuration options</li>
                                <li><i class="fas fa-check text-success me-2"></i>Event-based architecture with callbacks</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h5 class="mt-4"><i class="fas fa-code me-2"></i>Usage Example</h5>
                    <pre class="bg-dark p-3 rounded"><code>// Create a new dialog instance
const myDialog = new Dialog({
  id: 'my-dialog',
  title: 'My Dialog',
  description: 'This is a description',
  size: 'md', // sm, md, lg, xl, full
  content: '&lt;p&gt;Your HTML content here&lt;/p&gt;',
  submitText: 'Confirm',
  onSubmit: () => {
    // Handle submit action
  }
});

// Open the dialog
myDialog.open();

// Set loading state
myDialog.setLoading(true, 'Processing...');

// Update progress
myDialog.setProgress('Step 2 of 3 completed');</code></pre>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Handle the custom dialog button
        document.getElementById('open-custom-dialog').addEventListener('click', function() {
            const customDialog = new Dialog({
                id: 'custom-dialog',
                title: 'Custom Dialog',
                description: 'This dialog was created dynamically',
                size: 'md',
                content: 
                    '<div class="text-center py-4">' +
                    '<i class="fas fa-check-circle text-success fa-4x mb-3"></i>' +
                    '<h4>Success!</h4>' +
                    '<p class="mb-0">Your custom dialog was created successfully.</p>' +
                    '</div>',
                submitText: 'Awesome',
                onSubmit: function() {
                    this.close();
                }
            });
            
            customDialog.open();
        });
        
        // Handle the API dialog button
        document.getElementById('open-api-dialog').addEventListener('click', function() {
            const apiDialog = new Dialog({
                id: 'api-dialog',
                title: 'API Integration',
                description: 'Fetching data from API',
                size: 'md',
                content: 
                    '<div class="text-center py-3" id="api-dialog-content">' +
                    '<div class="spinner-border text-primary mb-3" role="status">' +
                    '<span class="visually-hidden">Loading...</span>' +
                    '</div>' +
                    '<p>Loading data from API...</p>' +
                    '</div>',
                footer: false
            });
            
            apiDialog.open();
            
            // Simulate API call
            setTimeout(function() {
                apiDialog.setContent(
                    '<div class="py-3">' +
                    '<h5 class="mb-3">Data Loaded Successfully</h5>' +
                    '<div class="card bg-dark mb-3">' +
                    '<div class="card-body">' +
                    '<h6 class="card-title">User Data</h6>' +
                    '<p class="card-text mb-1"><strong>Name:</strong> John Doe</p>' +
                    '<p class="card-text mb-1"><strong>Email:</strong> john@example.com</p>' +
                    '<p class="card-text mb-0"><strong>Role:</strong> Administrator</p>' +
                    '</div>' +
                    '</div>' +
                    '<button id="api-dialog-close" class="btn btn-primary w-100">Close</button>' +
                    '</div>'
                );
                
                // Add event listener to the close button
                document.getElementById('api-dialog-close').addEventListener('click', function() {
                    apiDialog.close();
                });
            }, 2000);
        });
        
        // Initialize images for the image viewer demo
        document.querySelectorAll('.demo-image').forEach(function(img) {
            // Handle image load errors
            img.onerror = function() {
                // Try to use existing photos from the wedding app
                this.src = "{{ url_for('static', filename='img/placeholder_1.jpg') }}";
                
                // If those fail too, use a generic placeholder
                this.onerror = function() {
                    this.src = "https://via.placeholder.com/400x300/6c757d/ffffff?text=Demo+Image";
                    this.onerror = null;
                };
            };
        });
    });
</script>
{% endblock %}